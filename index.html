<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indosphere: The Grand Archive</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@300;400&family=Noto+Serif:ital,wght@0,300;0,400;0,600;1,400&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #050505;
            --panel: #0f0f0f;
            --gold: #d4af37;
            --divine: #e0f7fa; 
            --glow: #00ffff;   
            --border: #333;
        }

        body {
            background: var(--bg);
            color: #e0e0e0;
            margin: 0;
            font-family: 'Noto Serif', serif;
            height: 100vh;
            overflow: hidden; 
            display: flex;
            flex-direction: column;
        }

        /* --- HEADER --- */
        header {
            height: 70px;
            flex-shrink: 0;
            background: rgba(10, 10, 10, 0.95);
            border-bottom: 1px solid #222;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 25px;
            z-index: 1000;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        }

        .brand {
            font-family: 'Cinzel', serif;
            font-size: 1.4rem;
            letter-spacing: 2px;
            color: var(--gold);
            font-weight: 700;
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.2);
        }

        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        select, input {
            background: #000;
            color: #ccc;
            border: 1px solid #333;
            padding: 6px 10px;
            font-family: 'Cinzel', serif;
            font-size: 0.75rem;
            border-radius: 2px;
            outline: none;
            transition: 0.3s;
        }

        select:hover, input:focus {
            border-color: var(--gold);
            box-shadow: 0 0 5px rgba(212, 175, 55, 0.2);
        }

        /* --- MAIN AREA --- */
        .main-container {
            flex-grow: 1;
            position: relative; 
            display: flex;
            overflow: hidden; 
            height: calc(100vh - 270px); 
        }

        #network {
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 50% 50%, #161616 0%, #050505 100%);
        }

        /* --- AESTHETIC DIVIDER & TIMELINE --- */
        
        /* The Drag Gutter is now the Aesthetic Divider */
        #drag-gutter {
            height: 12px;
            background: #0f0f0f;
            border-top: 1px solid #333;
            box-shadow: 0 -10px 20px rgba(0,0,0,1); /* Deep shadow creates depth */
            cursor: ns-resize;
            z-index: 3000;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-shrink: 0;
            position: relative;
        }

        /* The Gold/Grip Accent in the middle */
        #drag-gutter::before {
            content: "";
            width: 40px;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
            border-radius: 2px;
            opacity: 0.5;
        }

        #mytimeline {
            height: 200px; 
            background: #080808; /* Very dark grey */
            z-index: 20;
            position: relative;
            width: 100%;
            flex-shrink: 0;
        }

        /* --- TIMELINE CSS OVERRIDES (THE "LOLLIPOP" LOOK) --- */
        
        /* Hide the brutalist boxes */
        .vis-item.vis-point {
            background: transparent !important;
            border: none !important;
            color: #888;
            font-family: 'Noto Serif', serif;
            font-size: 0.85rem;
            transition: all 0.3s ease;
            margin-top: 10px; /* Space for the "stem" */
        }

        /* The colored dot */
        .vis-item.vis-dot {
            border-width: 2px;
            border-color: inherit; /* Uses the color calculated in JS */
            background-color: #000;
            box-shadow: 0 0 8px rgba(0,0,0,1);
            top: 5px; /* Adjust vertical position */
        }

        /* HOVER EFFECTS */
        .vis-item.vis-point:hover {
            color: #fff !important;
            z-index: 100;
            transform: translateY(-2px);
            text-shadow: 0 0 10px rgba(255,255,255,0.3);
        }

        .vis-item.vis-point:hover .vis-dot {
            background-color: inherit; /* Fill the dot */
            transform: scale(1.5);
            box-shadow: 0 0 15px currentColor; /* Glow with school color */
        }

        /* Selected State */
        .vis-item.vis-selected {
            color: var(--gold) !important;
        }
        .vis-item.vis-selected .vis-dot {
            background-color: var(--gold) !important;
            border-color: #fff !important;
            box-shadow: 0 0 20px var(--gold);
        }

        /* Axis Styling */
        .vis-time-axis .vis-text { 
            color: #444; 
            font-family: 'Cinzel', serif;
            font-size: 0.7rem;
        }
        .vis-time-axis .vis-grid.vis-minor { border-color: #1a1a1a; }
        .vis-time-axis .vis-grid.vis-major { border-color: #222; }

        /* --- SIDE PANEL --- */
        #side-panel {
            width: 0;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(10px);
            border-left: 1px solid var(--border);
            transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
            z-index: 5000;
            position: fixed;
            right: 0;
            top: 70px;
            bottom: 0;
            box-shadow: -10px 0 50px rgba(0, 0, 0, 0.8);
        }

        .panel-content {
            padding: 40px 30px;
            opacity: 0;
            transition: opacity 0.3s 0.2s;
            min-width: 300px;
        }

        .p-title {
            font-family: 'Cinzel', serif;
            font-size: 1.8rem;
            color: var(--gold);
            border-bottom: 1px solid #333;
            padding-bottom: 15px;
            margin-bottom: 15px;
            line-height: 1.2;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .p-label {
            color: #555;
            font-family: 'Cinzel', serif;
            font-size: 0.65rem;
            letter-spacing: 2px;
            margin-top: 25px;
            display: block;
            font-weight: 700;
            text-transform: uppercase;
        }

        .p-value {
            font-size: 1rem;
            color: #ddd;
            line-height: 1.6;
            margin-top: 5px;
            font-weight: 300;
        }

        .iast {
            font-style: italic;
            color: #e6c673;
        }

        .works-list {
            margin-top: 10px;
            padding-left: 0;
            list-style: none;
        }

        .works-list li {
            margin-bottom: 6px;
            color: #bbb;
            font-size: 0.9rem;
            position: relative;
            padding-left: 15px;
        }

        .works-list li::before {
            content: "•";
            color: var(--gold);
            position: absolute;
            left: 0;
        }

        /* --- LEGEND (CLEAN) --- */
        .legend {
            position: absolute;
            bottom: 30px;
            left: 30px;
            z-index: 1000;
            display: flex;
            flex-direction: column; 
            gap: 12px; 
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #bbb;
            padding: 15px 20px; 
            border-radius: 8px;
            font-size: 0.75rem;
            backdrop-filter: blur(8px);
            pointer-events: none;
            min-width: 120px;
            font-family: 'Cinzel', serif;
            letter-spacing: 1px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        /* Deity Star: Matches Node (Blue-White with Glow) */
        .symbol-star { 
            font-size: 1.4rem; 
            color: var(--divine); 
            text-shadow: 0 0 10px var(--glow); 
            line-height: 0.8;
        }

        /* People Dot: White (Neutral) */
        .symbol-dot { 
            width: 8px; height: 8px; 
            background-color: #fff; 
            border-radius: 50%; 
            box-shadow: 0 0 5px rgba(255,255,255,0.5); 
        }

        /* Line: Grey */
        .symbol-line { 
            width: 25px; height: 1px; 
            background-color: #888; 
        }
        
        .opus-link {
            color: var(--gold);
            text-decoration: none;
            border-bottom: 1px dotted var(--gold); 
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .opus-link:hover {
            color: #fff; 
            border-bottom: 1px solid #fff;
        }
    </style>
</head>

<body>
    <header>
        <div class="brand">Indosphere</div>
        <div class="controls">
            <select id="schoolFilter" onchange="updateGraph()">
                <option value="all">All Traditions</option>
                <optgroup label="Vedanta">
                    <option value="Advaita">Advaita</option>
                    <option value="Dvaita">Dvaita</option>
                    <option value="Vishishtadvaita">Vishishtadvaita</option>
                    <option value="Dvaitadvaita">Dvaitadvaita</option>
                    <option value="Shuddhadvaita">Shuddhadvaita</option>
                </optgroup>
                <optgroup label="Hindu Philosophy">
                    <option value="Nyaya">Nyaya</option>
                    <option value="Vaisheshika">Vaisheshika</option>
                    <option value="Samkhya">Samkhya</option>
                    <option value="Yoga">Yoga</option>
                    <option value="Mimamsa">Mimamsa</option>
                    <option value="Kashmir Shaivism">Kashmir Shaivism</option>
                    <option value="Shaiva">Shaiva</option>
                    <option value="Bhakti">Bhakti</option>
                </optgroup>
                <optgroup label="Buddhism">
                    <option value="Theravada">Theravada</option>
                    <option value="Mahayana">Mahayana</option>
                    <option value="Vajrayana">Vajrayana</option>
                    <option value="Zen">Zen</option>
                </optgroup>
                <optgroup label="Heterodox">
                    <option value="Jainism">Jainism</option>
                    <option value="Charvaka">Charvaka</option>
                    <option value="Ajivika">Ajivika</option>
                </optgroup>
                <optgroup label="Other">
                    <option value="Indology">Indology</option>
                    <option value="Literature">Literature</option>
                    <option value="Science">Science</option>
                    <option value="Modern">Modern Reformers</option>
                </optgroup>
            </select>

            <select id="regionFilter" onchange="updateGraph()">
                <option value="all">All Regions</option>
                <option value="North">North India</option>
                <option value="South">South India</option>
                <option value="East">East (Bengal/Bihar)</option>
                <option value="West">West (Gujarat/Maha)</option>
                <option value="Central">Central India</option>
                <option value="Global">Global / West</option>
            </select>

            <input type="text" id="search" placeholder="Search..." onkeyup="searchNode(event)">
        </div>
    </header>

    <div class="main-container">
        <div id="network"></div>
        
        <div class="legend">
            <div class="legend-item"><div class="symbol-star">★</div> Deity</div>
            <div class="legend-item"><div class="symbol-dot"></div> People</div>
            <div class="legend-item"><div class="symbol-line"></div> Lineage</div>
        </div>

        <div id="side-panel">
            <div class="panel-content" id="panel-content">
                <div id="p-name" class="p-title"></div>
                <span id="p-dates" class="p-value" style="color:#aaa"></span>
                <span class="p-label">School</span>
                <div id="p-school" class="p-value" style="color: var(--gold)"></div>
                <span class="p-label">Region</span>
                <div id="p-region" class="p-value"></div>
                <span class="p-label">Magnum Opus</span>
                <div id="p-work" class="p-value iast"></div>
                <span class="p-label">Other Works</span>
                <ul id="p-others" class="works-list"></ul>
                <span class="p-label">Significance</span>
                <div id="p-note" class="p-value"></div>
                <span class="p-label">Lineage</span>
                <div id="p-lineage" class="p-value" style="border-left: 2px solid #333; padding-left: 10px;"></div>
            </div>
        </div>
    </div>

    <div id="drag-gutter" title="Drag to resize"></div>

    <div id="mytimeline"></div>

    <script type="text/javascript">
        // --- DATA SECTION ---
        const rawData = [
            // --- DEITIES (The Source) ---
            {id:"Narayana", label:"Narayana", group:"Deity", region:"Divine", isDeity:true, note:"The Preserver; source of Vaishnava lineages."},
            {id:"Shiva", label:"Shiva", group:"Deity", region:"Divine", isDeity:true, note:"The Destroyer; Adi Guru of Yoga and Tantra."},
            {id:"Brahma", label:"Brahma", group:"Deity", region:"Divine", isDeity:true, note:"The Creator."},
            {id:"Rudra", label:"Rudra", group:"Deity", region:"Divine", isDeity:true, note:"Vedic form of Shiva."},
            {id:"Bhairava", label:"Bhairava", group:"Deity", region:"Divine", isDeity:true, note:"Fierce form of Shiva (Trika source)."},
            {id:"Bhairavi", label:"Bhairavi Devi", group:"Deity", region:"Divine", isDeity:true, note:"Tantric Goddess."},
            {id:"FourKumaras", label:"Four Kumaras", group:"Deity", region:"Divine", isDeity:true, note:"Mind-born sons of Brahma."},
            {id:"Hiranyagarbha", label:"Hiranyagarbha", group:"Deity", region:"Divine", isDeity:true, note:"Cosmic Womb; source of Yoga."},
            {id:"Manjushri", label:"Manjushri", group:"Deity", region:"Divine", isDeity:true, note:"Bodhisattva of Wisdom."},
            {id:"Vajradhara", label:"Vajradhara", group:"Deity", region:"Divine", isDeity:true, note:"Primordial Buddha (Tantric)."},
            {id:"Surya", label:"Surya", group:"Deity", region:"Divine", isDeity:true, note:"Sun God; Vedic deity associated with knowledge and light."},
            {id:"Indra", label:"Indra", group:"Deity", region:"Divine", isDeity:true, note:"King of Gods; Vedic deity of rain and thunder."},
            {id:"Varuna", label:"Varuna", group:"Deity", region:"Divine", isDeity:true, note:"God of Waters; Vedic deity of cosmic order."},

            // --- ANCIENT RISHIS ---
            {id:"ShaktiRishi", label:"Shakti (Rishi)", year:-2500, school:"Vedas", region:"North", others:[], note:"Son of Vashishta; Father of Parashara."},
            {id:"Dhanvantari", label:"Dhanvantari", year:-3000, school:"Ayurveda", region:"Vedic", work:"Ayurveda", others:["Dhanvantari Nighantu"], note:"God of Medicine."},
            {id:"Vashishta", label:"Vashishta", year:-3000, school:"Vedas", region:"North", work:"Mandala 7 of the Rigveda", others:["Yoga Vashishta"], note:"saptarishih."},
            {id:"Parashara", label:"Parashara", year:-2000, school:"Vedas", region:"North", work:"Vishnu Purana", others:["Parashara Smriti"], note:"Father of Vyasa."},
            {id:"Vyasa", label:"Vyasa", year:-1500, school:"Vedas", region:"North", work:"Mahabharata", others:["Brahma Sutras", "Puranas"], note:"Compiler of Vedas."},
            {id:"Shuka", label:"Shuka", year:-1400, school:"Advaita", region:"North", work:"Bhagavata (Narrator)", others:[], note:"Son of Vyasa."},
            {id:"Yajnavalkya", label:"Yajnavalkya", year:-850, school:"Vedas", region:"East", subregion:"Mithila", work:"Brihadaranyaka", others:["Shatapatha Brahmana"], note:"Greatest Upanishadic sage."},
            {id:"Maitreyi", label:"Maitreyi", year:-850, school:"Vedas", region:"East", subregion:"Mithila", note:"Philosopher wife."},
            {id:"Gargi", label:"Gargi", year:-850, school:"Vedas", region:"East", subregion:"Mithila", note:"Vedic debater."},
            {id:"Kapila", label:"Kapila", year:-600, school:"Samkhya", region:"North", work:"Samkhya Sutras", others:[], note:"Founder of Samkhya."},
            {id:"Asuri", label:"Asuri", year:-580, school:"Samkhya", region:"North", note:"Disciple of Kapila."},
            {id:"Panchashikha", label:"Panchashikha", year:-550, school:"Samkhya", region:"North", note:"Expanded Samkhya."},
            {id:"Jaimini", label:"Jaimini", year:-300, school:"Mimamsa", region:"North", work:"Mimamsa Sutras", others:[], note:"Ritualism."},
            {id:"Gautama", label:"Gautama", year:-200, school:"Nyaya", region:"East", subregion:"Mithila", work:"Nyaya Sutras", others:[], note:"Logic Founder."},
            {id:"Kanada", label:"Kanada", year:-200, school:"Vaisheshika", region:"West", subregion:"Gujarat", work:"Vaisheshika Sutras", others:[], note:"Atomism."},
            {id:"Patanjali", label:"Patanjali", year:-150, school:"Yoga", region:"North", subregion:"Kashmir", work:"Yoga Sutras", others:["Mahabhasya"], note:"Systematized Yoga."},
            {id:"Panini", label:"Panini", year:-500, school:"Grammar", region:"North West", subregion:"Gandhara", work:"Ashtadhyayi", others:["Dhatupatha"], note:"Linguistics."},
            {id:"Chanakya", label:"Chanakya", year:-350, school:"Statecraft", region:"East", subregion:"Magadha", work:"Arthashastra", others:["Chanakya Niti"], note:"Realpolitik."},
            {id:"Sushruta", label:"Sushruta", year:-600, school:"Medicine", region:"North", work:"Sushruta Samhita", others:[], note:"Surgery."},
            
            // --- HETERODOX ---
            {id:"Buddha", label:"Buddha", year:-563, school:"Buddhism", region:"East", subregion:"Magadha", work:"Pali Canon", others:["Dhammapada"], note:"The Awakened One."},
            {id:"Mahavira", label:"Mahavira", year:-540, school:"Jainism", region:"East", subregion:"Bihar", work:"Agamas", others:[], note:"24th Tirthankara."},
            {id:"Makkhali", label:"Makkhali Gosala", year:-500, school:"Ajivika", region:"East", subregion:"Magadha", work:"(Lost)", others:[], note:"Founder of Ajivika."},
            {id:"Charvaka", label:"Charvaka", year:-600, school:"Charvaka", region:"North", work:"Barhaspatya Sutras", others:[], note:"Materialist."},
            {id:"Brihaspati", label:"Brihaspati", year:-700, school:"Charvaka", region:"North", note:"Materialist Founder."},
            {id:"Nagarjuna", label:"Nagarjuna", year:150, school:"Buddhism", region:"South", subregion:"Andhra", work:"Mulamadhyamakakarika", others:["Sunyatasaptati"], note:"Madhyamaka Founder."},
            {id:"Aryadeva", label:"Aryadeva", year:200, school:"Buddhism", region:"South", subregion:"Andhra", work:"Catuhsataka", others:[], note:"Disciple of Nagarjuna."},
            {id:"Dignaga", label:"Dignaga", year:480, school:"Buddhism", region:"South", subregion:"Kanchipuram", work:"Pramana-samuccaya", others:[], note:"Buddhist Logic."},
            {id:"Huineng", label:"Huineng", year:638, school:"Buddhism", region:"China", work:"Platform Sutra", others:[], note:"6th Chan Patriarch."},
            {id:"Milarepa", label:"Milarepa", year:1052, school:"Buddhism", region:"Tibet", work:"Hundred Thousand Songs", others:[], note:"Yogi & Poet."},
            {id:"Bhadrabahu", label:"Bhadrabahu", year:-300, school:"Jainism", region:"South", subregion:"Karnataka", work:"Kalpa Sutra", others:[], note:"Spiritual Teacher of Chandragupta."},
            {id:"Kundakunda", label:"Kundakunda", year:100, school:"Jainism", region:"South", work:"Samayasara", others:["Niyamasara"], note:"Digambara Leader."},
            {id:"Kalidasa", label:"Kalidasa", year:400, school:"Literature", region:"Central", subregion:"Ujjain", work:"Shakuntalam", others:["Meghaduta", "Raghuvamsha"], note:"Greatest Sanskrit Poet."},

            // --- ADVAITA LINEAGE ---
            {id:"Gaudapada", label:"Gaudapada", year:650, school:"Advaita", region:"South", work:"Mandukya Karika", others:[], note:"Paramaguru of Shankara; foundational text on non-dualism; influenced by Buddhism."},
            {id:"Govinda", label:"Govinda Bhagavatpada", year:725, school:"Advaita", region:"Central", work:"", others:[], note:"Direct guru of Adi Shankara; yogi and teacher."},
            {id:"Shankara", label:"Adi Shankara", year:788, school:"Advaita", region:"South", subregion:"Kerala", work:"Brahmasutra Bhashya", workUrl:"https://www.wisdomlib.org/hinduism/book/brahma-sutras", others:["Vivekachudamani", "Bhaja Govindam", "Upadesasahasri"], note:"Founder/systematizer of Advaita; established four mathas."},
            {id:"Suresvara", label:"Suresvara", year:800, school:"Advaita", region:"South", work:"Naishkarmya Siddhi", others:["Brihadaranyaka Vartika"], note:"Direct disciple; first acharya of Sringeri matha; defended Advaita."},
            {id:"Padmapada", label:"Padmapada", year:800, school:"Advaita", region:"East", work:"Panchapadika", others:[], note:"Direct disciple; founder of Vivarana sub-school; linked to Puri matha."},
            {id:"Hastamalaka", label:"Hastamalaka", year:800, school:"Advaita", region:"West", work:"", others:[], note:"Direct disciple; profound simple teachings on self-knowledge."},
            {id:"Totaka", label:"Totakacharya", year:800, school:"Advaita", region:"North", work:"Totakashtakam", others:[], note:"Direct disciple; linked to Jyotirmath; devotional hymns."},
            {id:"Vacaspati", label:"Vacaspati Mishra", year:900, school:"Advaita", region:"East", subregion:"Mithila", work:"Bhamati", others:["Nyaya Tatparya Tika"], note:"Founder of Bhamati sub-school; polymath commentator on Shankara."},
            {id:"Sarvajnatman", label:"Sarvajnatman", year:900, school:"Advaita", region:"South", work:"Samkshepa Sariraka", others:[], note:"Post-Shankara scholar; summarized Brahma Sutras in Advaita framework."},
            {id:"Prakasatman", label:"Prakasatman", year:975, school:"Advaita", region:"South", work:"Vivarana", others:[], note:"Founder of Vivarana sub-school; commentary on Padmapada's Panchapadika."},
            {id:"Anandagiri", label:"Anandagiri", year:1260, school:"Advaita", region:"South", work:"", others:["Commentaries on Shankara's works"], note:"Tikakara; wrote glosses on Shankara's bhashyas and biographies."},
            {id:"Amalananda", label:"Amalananda", year:1250, school:"Advaita", region:"South", work:"Vedanta Kalpataru", others:[], note:"Commentator on Vacaspati's Bhamati; advanced epistemology."},
            {id:"BharatiTirtha", label:"Bharati Tirtha (Old)", year:1328, school:"Advaita", region:"South", subregion:"Karnataka", work:"Drg Drsya Viveka", others:[], note:"Preceptor of Vidyaranya; Sringeri acharya; discernment of seer-seen."},
            {id:"Vidyaranya", label:"Vidyaranya", year:1350, school:"Advaita", region:"South", subregion:"Karnataka", work:"Panchadasi", others:["Jivanmuktiviveka"], note:"Sringeri acharya; Vijayanagara patron; doxography and liberation texts."},
            {id:"SadanandaYogindra", label:"Sadananda Yogindra", year:1450, school:"Advaita", region:"North", work:"Vedantasara", others:[], note:"Introductory primer to Advaita; accessible for beginners."},
            {id:"Prakashananda", label:"Prakashananda Sarasvati", year:1500, school:"Advaita", region:"North", work:"Vedanta Siddhantamuktavali", others:[], note:"Emphasized drishti-srishti vada (creation as perception)."},
            {id:"Madhusudana", label:"Madhusudana Sarasvati", year:1540, school:"Advaita", region:"East", subregion:"Bengal", work:"Advaita Siddhi", others:["Bhakti-rasayana"], note:"Defended Advaita against Dvaita; integrated bhakti."},
            {id:"Appayya", label:"Appayya Dikshita", year:1520, school:"Advaita", region:"South", subregion:"Tamil Nadu", work:"Siddhantalesa Sangraha", others:["Kuvalayananda"], note:"Polymath; reconciled Shaiva Siddhanta with Advaita."},
            {id:"DharmarajaAdhvarindra", label:"Dharmaraja Adhvarindra", year:1600, school:"Advaita", region:"South", work:"Vedanta Paribhasa", others:[], note:"Standard epistemology text; pramanas in Advaita."},
            {id:"Nrisimhashrama", label:"Nrisimhashrama", year:1550, school:"Advaita", region:"South", work:"", others:["Commentaries on Advaita texts"], note:"Bridged classical and later Advaita; key commentator."},
            {id:"BrahmanandaSaraswati", label:"Swami Brahmananda Saraswati", year:1871, school:"Advaita", region:"North", work:"", others:["Vedic commentaries"], note:"Shankaracharya of Jyotirmath (1941-1953); guru of Karpatri Maharaj."},
            {id:"KarpatriMaharaj", label:"Swami Karpatri Maharaj", year:1907, school:"Advaita", region:"North", subregion:"Varanasi", work:"", others:["Ram Rajya Parishad texts"], note:"Dharma Samrat; founder of Akhil Bharatiya Ram Rajya Parishad; guru of Nischalananda."},
            {id:"Sacchidanandendra", label:"Sacchidānandendra Sarasvatī", year:1880, school:"Advaita", region:"South", work:"Vedanta Prakriya Pratyabhijna", others:[], note:"Reformer; emphasized pure Shankara over sub-schools."},
            {id:"RamanaMaharshi", label:"Ramana Maharshi", year:1879, school:"Advaita", region:"South", subregion:"Tamil Nadu", work:"Upadesa Saram", others:["Nan Yar? (Who Am I?)"], note:"Self-inquiry (atma-vicara); direct non-dual realization."},
            {id:"NisargadattaMaharaj", label:"Nisargadatta Maharaj", year:1897, school:"Advaita", region:"West", subregion:"Maharashtra", work:"I Am That", others:[], note:"Radical non-dualism; inquiry into 'I Am'."},
            {id:"Vivekananda", label:"Swami Vivekananda", year:1863, school:"Advaita", region:"East", subregion:"Bengal", work:"Rāja Yoga", others:["Karma Yoga"], note:"Global reviver; practical Vedanta."},
            {id:"ChandrashekharaBharati", label:"Chandrashekhara Bharati", year:1892, school:"Advaita", region:"South", subregion:"Sringeri", work:"", others:[], note:"34th Sringeri Jagadguru; yogi and renunciate."},
            {id:"AbhinavaVidyatirtha", label:"Abhinava Vidyatirtha", year:1917, school:"Advaita", region:"South", subregion:"Sringeri", work:"", others:[], note:"35th Sringeri Jagadguru; scholar and temple builder."},
            {id:"BharatiTirthaCurrent", label:"Bharati Tirtha (Current)", year:1951, school:"Advaita", region:"South", subregion:"Sringeri", work:"", others:[], note:"36th Sringeri Jagadguru (current); upholds tradition."},
            {id:"NischalanandaSaraswati", label:"Swami Nischalananda Saraswati", year:1943, school:"Advaita", region:"East", subregion:"Mithila", work:"", others:["Vedic math texts"], note:"145th Shankaracharya of Puri Peetham (current); scholar of Vedanta and mathematics."},

            // --- DVAITA LINEAGE ---
            {id:"Achyuta", label:"Achyuta Preksha", year:1200, school:"Dvaita", region:"South", subregion:"Udupi", note:"Guru of Madhva."},
            {id:"Madhva", label:"Madhvacharya", year:1238, school:"Dvaita", region:"South", subregion:"Karnataka", work:"Sarvamula", others:["Mahabharata Tatparya Nirnaya"], note:"Founder of Dualism."},
            {id:"Padmanabha", label:"Padmanabha Tirtha", year:1300, school:"Dvaita", region:"South", note:"Disciple."},
            {id:"Narahari", label:"Narahari Tirtha", year:1300, school:"Dvaita", region:"South", note:"Disciple."},
            {id:"Jayatirtha", label:"Jayatirtha", year:1365, school:"Dvaita", region:"South", subregion:"Karnataka", work:"Nyaya Sudha", others:["Vadavali"], note:"Systematizer."},
            {id:"Vyasatirtha", label:"Vyasatirtha", year:1460, school:"Dvaita", region:"South", subregion:"Karnataka", work:"Nyayamrita", others:["Tarkatandava"], note:"Guru of Krishnadevaraya."},
            {id:"Raghavendra", label:"Raghavendra Tirtha", year:1595, school:"Dvaita", region:"South", subregion:"Mantralayam", work:"Parimala", others:[], note:"Saint Scholar."},

            // --- VISHISHTADVAITA ---
            {id:"Nammalvar", label:"Nammalvar", year:880, school:"Vishishtadvaita", region:"South", subregion:"Tamil Nadu", work:"Tiruvaymoli", others:[], note:"Alvar."},
            {id:"Nathamuni", label:"Nathamuni", year:900, school:"Vishishtadvaita", region:"South", subregion:"Tamil Nadu", work:"Yoga Rahasya", others:["Nyayatattva"], note:"First Acharya."},
            {id:"Yamuna", label:"Yamunacharya", year:917, school:"Vishishtadvaita", region:"South", subregion:"Tamil Nadu", work:"Siddhitraya", others:["Gitartha Sangraha"], note:"Preceptor."},
            {id:"Ramanuja", label:"Ramanuja", year:1017, school:"Vishishtadvaita", region:"South", subregion:"Tamil Nadu", work:"Sri Bhashya", others:["Vedartha Sangraha"], note:"Founder."},
            {id:"Desika", label:"Vedanta Desika", year:1268, school:"Vishishtadvaita", region:"South", subregion:"Tamil Nadu", work:"Paduka Sahasram", others:["Rahasyatrayasara"], note:"Vadakalai Leader."},
            {id:"Pillai", label:"Pillai Lokacharya", year:1205, school:"Vishishtadvaita", region:"South", subregion:"Tamil Nadu", work:"Srivachana Bhushanam", others:[], note:"Thenkalai Leader."},

            // --- KASHMIR SHAIVISM ---
            {id:"Vasugupta", label:"Vasugupta", year:800, school:"Kashmir Shaivism", region:"North", subregion:"Kashmir", work:"Shiva Sutras", others:["Spanda Karika"], note:"Founder."},
            {id:"Somananda", label:"Somananda", year:900, school:"Kashmir Shaivism", region:"North", subregion:"Kashmir", work:"Shiva Drishti", others:[], note:"Pratyabhijna."},
            {id:"Utpaladeva", label:"Utpaladeva", year:925, school:"Kashmir Shaivism", region:"North", subregion:"Kashmir", work:"Ishvara Pratyabhijna", others:["Sivastotravali"], note:"Architect."},
            {id:"Abhinavagupta", label:"Abhinavagupta", year:950, school:"Kashmir Shaivism", region:"North", subregion:"Kashmir", work:"Tantraloka", others:["Abhinavabharati"], note:"Tantric Genius."},
            {id:"Kshemaraja", label:"Kshemaraja", year:1000, school:"Kashmir Shaivism", region:"North", subregion:"Kashmir", work:"Pratyabhijnahridayam", others:[], note:"Disciple."},
            {id:"Lakshmanjoo", label:"Lakshmanjoo", year:1907, school:"Kashmir Shaivism", region:"North", subregion:"Kashmir", work:"Secret Supreme", others:[], note:"Modern Master."},

            // --- NYAYA & NAVYA-NYAYA ---
            {id:"Vatsyayana", label:"Vatsyayana", year:450, school:"Nyaya", region:"North", work:"Nyaya Bhashya", others:[], note:"Commentator."},
            {id:"Uddyotakara", label:"Uddyotakara", year:600, school:"Nyaya", region:"North", work:"Nyaya Varttika", others:[], note:"Commentator."},
            {id:"Vacaspati", label:"Vacaspati Mishra", year:900, school:"Nyaya", region:"East", subregion:"Mithila", work:"Nyaya Tatparya Tika", others:["Bhamati"], note:"Polymath."},
            {id:"Udayana", label:"Udayana", year:984, school:"Nyaya", region:"East", subregion:"Mithila", work:"Kusumanjali", others:["Atmatattvaviveka"], note:"Theist Logic."},
            {id:"Gangesa", label:"Gangesa", year:1325, school:"Nyaya", region:"East", subregion:"Mithila", work:"Tattvacintamani", others:[], note:"Navya-Nyaya Founder."},
            {id:"Raghunatha", label:"Raghunatha Shiromani", year:1477, school:"Nyaya", region:"East", subregion:"Bengal", work:"Didhiti", others:[], note:"Logician."},
            {id:"Gadadhara", label:"Gadadhara", year:1650, school:"Nyaya", region:"East", subregion:"Bengal", work:"Shaktivada", others:[], note:"Logician."},

            // --- MIMAMSA ---
            {id:"Shabara", label:"Shabara", year:200, school:"Mimamsa", region:"North", work:"Shabara Bhashya", others:[], note:"Commentator."},
            {id:"Kumarila", label:"Kumarila Bhatta", year:700, school:"Mimamsa", region:"North", subregion:"Prayag", work:"Slokavartika", others:["Tantravartika"], note:"Bhatta School."},
            {id:"Prabhakara", label:"Prabhakara", year:700, school:"Mimamsa", region:"South", subregion:"Kerala", work:"Brihati", others:[], note:"Guru School."},
            {id:"Mandana", label:"Mandana Mishra", year:800, school:"Mimamsa", region:"East", subregion:"Mithila", work:"Brahmasiddhi", others:[], note:"Debater."},

            // --- SAMKHYA & YOGA & VAISHESHIKA ---
            {id:"IshvaraKrishna", label:"Ishvara Krishna", year:350, school:"Samkhya", region:"North", work:"Samkhya Karika", others:[], note:"Classical Samkhya."},
            {id:"Vijnanabhikshu", label:"Vijnanabhikshu", year:1550, school:"Yoga", region:"North", work:"Yogavarttika", others:[], note:"Syncretic."},
            {id:"Prashastapada", label:"Prashastapada", year:550, school:"Vaisheshika", region:"North", work:"Padarthadharmasamgraha", others:[], note:"Atomism."},

            // --- OTHER VEDANTA ---
            {id:"Nimbarka", label:"Nimbarka", year:1150, school:"Dvaitadvaita", region:"South", subregion:"Andhra", work:"Parijata Saurabha", others:["Dasasloki"], note:"Dvaitadvaita."},
            {id:"Vallabha", label:"Vallabhacharya", year:1479, school:"Shuddhadvaita", region:"West", subregion:"Gujarat", work:"Anubhashya", others:["Subodhini"], note:"Pushtimarg."},
            {id:"Srinivasa", label:"Srinivasa Acharya", year:1200, school:"Dvaitadvaita", region:"South", note:"Disciple."},
            {id:"Vitthalanatha", label:"Vitthalanatha", year:1516, school:"Shuddhadvaita", region:"North", subregion:"Braj", note:"Son of Vallabha."},

            // --- BUDDHISM LINEAGE ---
            {id:"Upali", label:"Upali", year:-500, school:"Buddhism", region:"East", subregion:"Magadha", note:"Vinaya Master."},
            {id:"Mahakassapa", label:"Mahakassapa", year:-500, school:"Buddhism", region:"East", note:"1st Patriarch."},
            {id:"Ananda", label:"Ananda", year:-500, school:"Buddhism", region:"East", note:"Dhamma Keeper."},
            {id:"Mahinda", label:"Mahinda", year:-250, school:"Buddhism", region:"South", subregion:"Sri Lanka", note:"Ashoka's Son."},
            {id:"Buddhaghosa", label:"Buddhaghosa", year:430, school:"Buddhism", region:"South", subregion:"Sri Lanka", work:"Visuddhimagga", others:[], note:"Theravada."},
            {id:"Asanga", label:"Asanga", year:350, school:"Buddhism", region:"North West", subregion:"Gandhara", work:"Yogacarabhumi", others:["Mahayana-Samgraha"], note:"Yogacara."},
            {id:"Vasubandhu", label:"Vasubandhu", year:350, school:"Buddhism", region:"North West", subregion:"Gandhara", work:"Abhidharmakosha", others:["Vimsatika"], note:"Yogacara."},
            {id:"Dharmakirti", label:"Dharmakirti", year:600, school:"Buddhism", region:"South", work:"Pramanavarttika", others:["Nyayabindu"], note:"Logic."},
            {id:"Bodhidharma", label:"Bodhidharma", year:480, school:"Buddhism", region:"China", subregion:"Kanchipuram", work:"Zen Teachings", others:[], note:"Zen Founder."},
            {id:"Padmasambhava", label:"Padmasambhava", year:750, school:"Buddhism", region:"Tibet", subregion:"Swat", note:"Guru Rinpoche."},
            {id:"Atisha", label:"Atisha", year:982, school:"Buddhism", region:"Tibet", subregion:"Bengal", note:"Kadampa Founder."},
            {id:"Tsongkhapa", label:"Tsongkhapa", year:1357, school:"Buddhism", region:"Tibet", note:"Gelug Founder."},
            {id:"DalaiLama", label:"Dalai Lama (14th)", year:1935, school:"Buddhism", region:"Tibet", note:"14th.", others:[]},

            // --- JAINISM LINEAGE ---
            {id:"GautamaGanadhara", label:"Gautama Ganadhara", year:-500, school:"Jainism", region:"East", subregion:"Bihar", note:"Disciple."},
            {id:"Sudharma", label:"Sudharma", year:-500, school:"Jainism", region:"East", subregion:"Bihar", note:"Disciple."},
            {id:"Umaswati", label:"Umaswati", year:200, school:"Jainism", region:"West", work:"Tattvartha Sutra", others:[], note:"Shared Text."},
            {id:"Siddhasena", label:"Siddhasena", year:480, school:"Jainism", region:"West", work:"Nyayavatara", others:[], note:"Logician."},
            {id:"Haribhadra", label:"Haribhadra Suri", year:750, school:"Jainism", region:"West", subregion:"Gujarat", work:"Saddarshanasamuccaya", others:[], note:"Philosopher."},
            {id:"Hemachandra", label:"Hemachandra", year:1088, school:"Jainism", region:"West", subregion:"Gujarat", work:"Yogasastra", others:["Siddha-Hema"], note:"Polymath."},

            // --- BHAKTI & LIT ---
            {id:"Vidyapati", label:"Vidyapati", year:1352, school:"Literature", region:"East", subregion:"Mithila", work:"Padavali", others:["Kirtilata"], note:"Maithili Poet."},
            {id:"Jayadeva", label:"Jayadeva", year:1200, school:"Bhakti", region:"East", subregion:"Odisha", work:"Gita Govinda", others:["Dasavatara Stotra"], note:"Poet."},
            {id:"Chaitanya", label:"Chaitanya", year:1486, school:"Bhakti", region:"East", subregion:"Bengal", work:"Siksastakam", others:[], note:"Gaudiya Founder."},
            {id:"Kabir", label:"Kabir", year:1440, school:"Bhakti", region:"North", subregion:"Varanasi", work:"Bijak", others:["Sakhi Granth"], note:"Nirguna."},
            {id:"Tulsidas", label:"Tulsidas", year:1532, school:"Bhakti", region:"North", subregion:"Varanasi", work:"Ramcharitmanas", others:["Vinaya Patrika"], note:"Ramayana."},
            {id:"Surdas", label:"Surdas", year:1478, school:"Bhakti", region:"North", subregion:"Braj", work:"Sur Sagar", others:["Sur Saravali"], note:"Krishna Bhakta."},
            {id:"Mirabai", label:"Mirabai", year:1498, school:"Bhakti", region:"West", subregion:"Rajasthan", work:"Bhajans", others:[], note:"Krishna Bhakta."},
            {id:"Andal", label:"Andal", year:750, school:"Bhakti", region:"South", subregion:"Tamil Nadu", work:"Tiruppavai", others:["Nachiyar Tirumoli"], note:"Alvar."},
            {id:"Appayya", label:"Appayya Dikshita", year:1520, school:"Shaiva", region:"South", subregion:"Tamil Nadu", work:"Siddhantalesa", others:["Kuvalayananda"], note:"Polymath."},
            {id:"Tyagaraja", label:"Tyagaraja", year:1767, school:"Music", region:"South", subregion:"Tamil Nadu", work:"Pancharatna", others:[], note:"Musician."},
            {id:"Muthuswami", label:"Muthuswami Dikshitar", year:1775, school:"Music", region:"South", subregion:"Tamil Nadu", work:"Navagraha Kritis", others:[], note:"Musician."},
            {id:"SyamaSastri", label:"Syama Sastri", year:1762, school:"Music", region:"South", subregion:"Tamil Nadu", work:"Swarajatis", others:[], note:"Musician."},
            {id:"AmirKhusrau", label:"Amir Khusrau", year:1253, school:"Literature", region:"North", subregion:"Delhi", work:"Qiran-us-Sa'dain", others:["Tughlaq Nama"], note:"Poet."},

            // --- MODERN ERA ---
            {id:"RamMohan", label:"Ram Mohan Roy", year:1772, school:"Modern", region:"East", subregion:"Bengal", work:"Brahmo Samaj", others:["Precepts of Jesus"], note:"Reformer."},
            {id:"Bankim", label:"Bankim Chandra", year:1838, school:"Literature", region:"East", subregion:"Bengal", work:"Anandamath", others:["Vande Mataram"], note:"Novelist."},
            {id:"Vivekananda", label:"Vivekananda", year:1863, school:"Advaita", region:"East", subregion:"Bengal", work:"Raja Yoga", others:["Karma Yoga", "Chicago Address"], note:"Global Vedanta."},
            {id:"Tagore", label:"Rabindranath Tagore", year:1861, school:"Literature", region:"East", subregion:"Bengal", work:"Gitanjali", others:["Gora", "Jana Gana Mana"], note:"Nobel Laureate."},
            {id:"Aurobindo", label:"Sri Aurobindo", year:1872, school:"Yoga", region:"East", subregion:"Pondicherry", work:"Life Divine", others:["Savitri"], note:"Integral Yoga."},
            {id:"Ramanujan", label:"Srinivasa Ramanujan", year:1887, school:"Science", region:"South", subregion:"Tamil Nadu", work:"Notebooks", others:["Mock Theta Functions"], note:"Math Genius."},
            {id:"Ambedkar", label:"B.R. Ambedkar", year:1891, school:"Modern", region:"West", subregion:"Maharashtra", work:"Constitution", others:["Annihilation of Caste"], note:"Social Justice."},
            {id:"Nazrul", label:"Kazi Nazrul Islam", year:1899, school:"Literature", region:"East", subregion:"Bengal", work:"Bidrohi", others:["Agnibina"], note:"Rebel Poet."},
            {id:"Sarat", label:"Sarat Chandra", year:1876, school:"Literature", region:"East", subregion:"Bengal", work:"Devdas", others:["Parineeta"], note:"Novelist."},
            {id:"Madhusudan", label:"Michael Madhusudan", year:1824, school:"Literature", region:"East", subregion:"Bengal", work:"Meghnad Badh", others:["Sharmistha"], note:"Epic Poet."},
            {id:"Ramakrishna", label:"Ramakrishna", year:1836, school:"Bhakti", region:"East", subregion:"Bengal", work:"Kathamrita", others:[], note:"Mystic."},
            {id:"CVRaman", label:"C.V. Raman", year:1888, school:"Science", region:"South", subregion:"Tamil Nadu", work:"Raman Effect", others:[], note:"Physicist."},
            {id:"Bose", label:"J.C. Bose", year:1858, school:"Science", region:"East", subregion:"Bengal", work:"Plant Science", others:[], note:"Physicist/Botanist."},
            {id:"Satyendranath", label:"S.N. Bose", year:1894, school:"Science", region:"East", subregion:"Bengal", work:"Boson", others:["Planck-Bose Statistics"], note:"Physicist."},
            {id:"Gandhi", label:"Mahatma Gandhi", year:1869, school:"Modern", region:"West", subregion:"Gujarat", work:"Experiments with Truth", others:["Hind Swaraj"], note:"Freedom Fighter."},
            {id:"Nivedita", label:"Sister Nivedita", year:1867, school:"Modern", region:"East", subregion:"Bengal", work:"The Master as I Saw Him", others:[], note:"Disciple."},
            
            // --- INDOLOGISTS & HISTORIANS (Full List) ---
            {id:"Megasthenes", label:"Megasthenes", year:-350, school:"Indology", region:"Global", subregion:"Greece", work:"Indica", others:[], note:"Ambassador."},
            {id:"Faxian", label:"Faxian", year:399, school:"Indology", region:"China", subregion:"China", work:"Buddhist Kingdoms", others:[], note:"Pilgrim."},
            {id:"Xuanzang", label:"Xuanzang", year:629, school:"Indology", region:"China", subregion:"China", work:"Great Tang Records", others:[], note:"Pilgrim."},
            {id:"AlBiruni", label:"Al-Biruni", year:973, school:"Indology", region:"Global", subregion:"Persia", work:"Indica", others:["Chronology"], note:"First Indologist."},
            {id:"IbnBattuta", label:"Ibn Battuta", year:1333, school:"Indology", region:"Global", subregion:"Morocco", work:"Rihla", others:[], note:"Traveler."},
            {id:"MarcoPolo", label:"Marco Polo", year:1288, school:"Indology", region:"Global", subregion:"Venice", work:"Travels", others:[], note:"Traveler."},
            {id:"Jones", label:"William Jones", year:1746, school:"Indology", region:"Global", subregion:"UK", work:"Asiatic Researches", others:["Sakuntala Trans"], note:"Indo-European Link."},
            {id:"Wilkins", label:"Charles Wilkins", year:1749, school:"Indology", region:"Global", subregion:"UK", work:"Gita Translation", others:[], note:"Translator."},
            {id:"Prinsep", label:"James Prinsep", year:1799, school:"Indology", region:"Global", subregion:"UK", work:"Decipherment of Brahmi", others:[], note:"Epigraphist."},
            {id:"Cunningham", label:"Alexander Cunningham", year:1814, school:"Indology", region:"Global", subregion:"UK", work:"ASI Reports", others:[], note:"Archaeology."},
            {id:"MaxMuller", label:"Max Muller", year:1823, school:"Indology", region:"Global", subregion:"Germany", work:"Sacred Books", others:["History of Sanskrit Lit"], note:"Philologist."},
            {id:"Weber", label:"Albrecht Weber", year:1825, school:"Indology", region:"Global", subregion:"Germany", work:"Indische Studien", others:[], note:"Vedic Scholar."},
            {id:"MonierWilliams", label:"Monier-Williams", year:1819, school:"Indology", region:"Global", subregion:"UK", work:"Sanskrit Dictionary", others:[], note:"Lexicographer."},
            {id:"Rajendralal", label:"Rajendralal Mitra", year:1822, school:"Indology", region:"East", subregion:"Bengal", work:"Antiquities of Orissa", others:["Indo-Aryans"], note:"First Indian Indologist."},
            {id:"Bhandarkar", label:"R.G. Bhandarkar", year:1837, school:"Indology", region:"West", subregion:"Maharashtra", work:"Vaishnavism/Shaivism", others:[], note:"Historian."},
            {id:"Buhler", label:"Georg Buhler", year:1837, school:"Indology", region:"Global", subregion:"Germany", work:"Encyclopedia", others:[], note:"Manuscripts."},
            {id:"Jacobi", label:"Hermann Jacobi", year:1850, school:"Indology", region:"Global", subregion:"Germany", work:"Jaina Sutras", others:[], note:"Jainism."},
            {id:"Roth", label:"Rudolf Roth", year:1821, school:"Indology", region:"Global", subregion:"Germany", work:"Vedic Philology", others:[], note:"Vedas."},
            {id:"Oldenberg", label:"Hermann Oldenberg", year:1854, school:"Indology", region:"Global", subregion:"Germany", work:"Buddha", others:[], note:"Buddhism."},
            {id:"Renou", label:"Louis Renou", year:1896, school:"Indology", region:"Global", subregion:"France", work:"Vedic India", others:[], note:"Vedas."},
            {id:"Gonda", label:"Jan Gonda", year:1905, school:"Indology", region:"Global", subregion:"Netherlands", work:"Sanskrit Syntax", others:[], note:"Prolific."},
            {id:"Jayaswal", label:"K.P. Jayaswal", year:1881, school:"Indology", region:"East", subregion:"Bihar", work:"Hindu Polity", others:[], note:"Republics."},
            {id:"Raychaudhuri", label:"H.C. Raychaudhuri", year:1892, school:"Indology", region:"East", subregion:"Bengal", work:"Political History", others:[], note:"Ancient India."},
            {id:"Kosambi", label:"D.D. Kosambi", year:1907, school:"Indology", region:"West", subregion:"Goa", work:"Indian History", others:[], note:"Marxist."},
            {id:"Raghavan", label:"V. Raghavan", year:1908, school:"Indology", region:"South", subregion:"Tamil Nadu", work:"Bhoja's Sringara", others:[], note:"Aesthetics."},
            {id:"Basham", label:"A.L. Basham", year:1914, school:"Indology", region:"Global", subregion:"UK", work:"The Wonder That Was India", others:[], note:"Cultural History."},
            {id:"Ingalls", label:"Daniel Ingalls", year:1916, school:"Indology", region:"Global", subregion:"USA", work:"Navya-Nyaya Logic", others:[], note:"Logic."},
            {id:"SitaRamGoel", label:"Sita Ram Goel", year:1921, school:"Indology", region:"North", subregion:"Haryana", work:"Hindu Temples", others:[], note:"Historian."},
            {id:"DharamPal", label:"Dharam Pal", year:1922, school:"Indology", region:"North", subregion:"Punjab", work:"The Beautiful Tree", others:[], note:"Education."},
            {id:"RomilaThapar", label:"Romila Thapar", year:1931, school:"Indology", region:"North", subregion:"Punjab", work:"History of India", others:["Early India"], note:"Ancient History."},
            {id:"IrfanHabib", label:"Irfan Habib", year:1931, school:"Indology", region:"North", subregion:"Aligarh", work:"Agrarian System", others:["Medieval India"], note:"Mughal History."},
            {id:"RSSharma", label:"R.S. Sharma", year:1919, school:"Indology", region:"East", subregion:"Bihar", work:"Indian Feudalism", others:[], note:"Ancient History."},
            {id:"Staal", label:"Frits Staal", year:1930, school:"Indology", region:"Global", subregion:"Netherlands", work:"Agni", others:[], note:"Ritual."},
            {id:"Witzel", label:"Michael Witzel", year:1943, school:"Indology", region:"Global", subregion:"Germany", work:"Vedic Studies", others:[], note:"Vedas."},
            {id:"Doniger", label:"Wendy Doniger", year:1940, school:"Indology", region:"Global", subregion:"USA", work:"The Hindus", others:[], note:"Mythology."},
            {id:"Bronkhorst", label:"Johannes Bronkhorst", year:1946, school:"Indology", region:"Global", subregion:"Netherlands", work:"Greater Magadha", others:[], note:"Cultural."},
            {id:"Sanderson", label:"Alexis Sanderson", year:1948, school:"Indology", region:"Global", subregion:"UK", work:"Shaiva Studies", others:[], note:"Tantra."},
            {id:"Pollock", label:"Sheldon Pollock", year:1948, school:"Indology", region:"Global", subregion:"USA", work:"Language of Gods", others:[], note:"Sanskrit."},
            {id:"Olivelle", label:"Patrick Olivelle", year:1942, school:"Indology", region:"Global", subregion:"Sri Lanka", work:"Upanishads", others:[], note:"Philologist."},
            {id:"Eaton", label:"Richard Eaton", year:1940, school:"Indology", region:"Global", subregion:"USA", work:"Persianate Age", others:[], note:"Islam in India."},
            {id:"Wink", label:"Andre Wink", year:1990, school:"Indology", region:"Global", subregion:"Netherlands", work:"Al-Hind", others:[], note:"Indo-Islamic."},
            {id:"Subrahmanyam", label:"Sanjay Subrahmanyam", year:1961, school:"Indology", region:"South", subregion:"Tamil Nadu", work:"Connected History", others:[], note:"Early Modern."},
            {id:"Shulman", label:"David Shulman", year:1949, school:"Indology", region:"Global", subregion:"Israel", work:"Temple Myths", others:[], note:"South India."},
            {id:"Hart", label:"George Hart", year:1945, school:"Indology", region:"Global", subregion:"USA", work:"Tamil Poems", others:[], note:"Sangam."},
            {id:"Jamison", label:"Stephanie Jamison", year:2000, school:"Indology", region:"Global", subregion:"USA", work:"Rig Veda Trans", others:[], note:"Vedas."},
            {id:"Brereton", label:"Joel Brereton", year:2000, school:"Indology", region:"Global", subregion:"USA", work:"Rig Veda Trans", others:[], note:"Vedas."},
            {id:"Voltaire", label:"Voltaire", year:1694, school:"Indology", region:"Global", subregion:"France", work:"Essai", others:[], note:"Indophile."},
            {id:"Schopenhauer", label:"Schopenhauer", year:1788, school:"Indology", region:"Global", subregion:"Germany", work:"World as Will", others:[], note:"Upanishads admirer."},
            {id:"Tesla", label:"Tesla", year:1856, school:"Indology", region:"Global", subregion:"USA", work:"AC", others:[], note:"Vedantic Physics."},
            {id:"Eliot", label:"T.S. Eliot", year:1888, school:"Indology", region:"Global", subregion:"UK", work:"Waste Land", others:[], note:"Sanskrit influence."},
            {id:"Oppenheimer", label:"Oppenheimer", year:1904, school:"Indology", region:"Global", subregion:"USA", work:"Trinity", others:[], note:"Gita Scholar."},
            {id:"Harrison", label:"Harrison", year:1943, school:"Indology", region:"Global", subregion:"UK", work:"Sitar", others:[], note:"Beatles."},
            {id:"Goethe", label:"Goethe", year:1749, school:"Indology", region:"Global", subregion:"Germany", note:"Admired Shakuntalam", others:[]},
            {id:"Thoreau", label:"Thoreau", year:1817, school:"Indology", region:"Global", subregion:"USA", work:"Walden", others:[], note:"Transcendentalist."},
            {id:"Emerson", label:"Emerson", year:1803, school:"Indology", region:"Global", subregion:"USA", work:"Brahma", others:[], note:"Transcendentalist."},
            {id:"Zimmer", label:"Heinrich Zimmer", year:1890, school:"Indology", region:"Global", subregion:"Germany", work:"Philosophies of India", others:[], note:"Mythology."},
            {id:"Deussen", label:"Paul Deussen", year:1845, school:"Indology", region:"Global", subregion:"Germany", work:"Sixty Upanishads", others:[], note:"Vedanta."}
        ];

        // --- 2. LINEAGES (The Connections) ---
        const lineages = [
            {s:"Shiva", t:"Vasugupta", type:"Divine"}, {s:"Shiva", t:"Shankara", type:"Influence"},
            {s:"Narayana", t:"Brahma", type:"Lineage"}, {s:"Brahma", t:"Vashishta", type:"Lineage"},
            {s:"Vashishta", t:"ShaktiRishi", type:"Lineage"}, {s:"ShaktiRishi", t:"Parashara", type:"Lineage"},
            {s:"Parashara", t:"Vyasa", type:"Lineage"}, {s:"Vyasa", t:"Shuka", type:"Lineage"},
            {s:"Shuka", t:"Gaudapada", type:"Lineage"}, {s:"Gaudapada", t:"Govinda", type:"Lineage (Guru)"},
            {s:"Govinda", t:"Shankara", type:"Lineage (Guru)"}, {s:"Shankara", t:"Suresvara", type:"Lineage (Guru)"},
            {s:"Shankara", t:"Padmapada", type:"Lineage (Guru)"}, {s:"Shankara", t:"Totaka", type:"Lineage (Guru)"},
            {s:"Shankara", t:"Hastamalaka", type:"Lineage (Guru)"}, {s:"Suresvara", t:"Vacaspati", type:"Lineage"},
            {s:"Vacaspati", t:"Sarvajnatman", type:"Influence"}, {s:"Padmapada", t:"Prakasatman", type:"Lineage"},
            {s:"Shankara", t:"Anandagiri", type:"Lineage"}, {s:"Vacaspati", t:"Amalananda", type:"Influence"},
            {s:"Shankara", t:"BharatiTirtha", type:"Lineage"}, {s:"BharatiTirtha", t:"Vidyaranya", type:"Lineage (Guru)"},
            {s:"Vidyaranya", t:"SadanandaYogindra", type:"Lineage"}, {s:"Madhusudana", t:"Prakashananda", type:"Influence"},
            {s:"Shankara", t:"Madhusudana", type:"Lineage"}, {s:"Shankara", t:"Appayya", type:"Lineage"},
            {s:"Shankara", t:"DharmarajaAdhvarindra", type:"Lineage"}, {s:"Shankara", t:"Nrisimhashrama", type:"Lineage"},
            {s:"Shankara", t:"BrahmanandaSaraswati", type:"Lineage"}, {s:"BrahmanandaSaraswati", t:"KarpatriMaharaj", type:"Lineage (Guru)"},
            {s:"KarpatriMaharaj", t:"NischalanandaSaraswati", type:"Lineage (Guru)"}, {s:"Shankara", t:"Sacchidanandendra", type:"Lineage"},
            {s:"Ramakrishna", t:"Vivekananda", type:"Lineage (Guru)"}, {s:"Vivekananda", t:"RamanaMaharshi", type:"Influence"},
            {s:"RamanaMaharshi", t:"NisargadattaMaharaj", type:"Influence"}, {s:"Shankara", t:"ChandrashekharaBharati", type:"Lineage"},
            {s:"ChandrashekharaBharati", t:"AbhinavaVidyatirtha", type:"Lineage (Guru)"}, {s:"AbhinavaVidyatirtha", t:"BharatiTirthaCurrent", type:"Lineage (Guru)"},
            {s:"Shankara", t:"NischalanandaSaraswati", type:"Lineage"},
            {s:"Narayana", t:"Madhva", type:"Divine"}, {s:"Madhva", t:"Padmanabha", type:"Guru"}, 
            {s:"Padmanabha", t:"Narahari", type:"Guru"}, {s:"Madhva", t:"Jayatirtha", type:"Lineage"}, 
            {s:"Jayatirtha", t:"Vyasatirtha", type:"Lineage"}, {s:"Vyasatirtha", t:"Raghavendra", type:"Lineage"},
            {s:"Narayana", t:"Nammalvar", type:"Inspiration"}, {s:"Nammalvar", t:"Nathamuni", type:"Inspiration"},
            {s:"Nathamuni", t:"Yamuna", type:"GrandGuru"}, {s:"Yamuna", t:"Ramanuja", type:"Preceptor"},
            {s:"Ramanuja", t:"Desika", type:"Lineage"}, {s:"Ramanuja", t:"Pillai", type:"Lineage"},
            {s:"Vasugupta", t:"Somananda", type:"Lineage"}, {s:"Somananda", t:"Utpaladeva", type:"Guru"},
            {s:"Utpaladeva", t:"Abhinavagupta", type:"GrandGuru"}, {s:"Abhinavagupta", t:"Kshemaraja", type:"Guru"},
            {s:"Abhinavagupta", t:"Lakshmanjoo", type:"Lineage"},
            {s:"Gautama", t:"Vatsyayana", type:"Lineage"}, {s:"Udayana", t:"Gangesa", type:"Influence"},
            {s:"Gangesa", t:"Raghunatha", type:"Lineage"}, {s:"Raghunatha", t:"Gadadhara", type:"Lineage"},
            {s:"Buddha", t:"Mahakassapa", type:"Guru"}, {s:"Mahakassapa", t:"Ananda", type:"Guru"},
            {s:"Buddha", t:"Nagarjuna", type:"Inspiration"}, {s:"Nagarjuna", t:"Aryadeva", type:"Guru"},
            {s:"Asanga", t:"Vasubandhu", type:"Brother"}, {s:"Vasubandhu", t:"Dignaga", type:"Lineage"},
            {s:"Bodhidharma", t:"Huineng", type:"Lineage"}, {s:"Padmasambhava", t:"Milarepa", type:"Lineage"},
            {s:"Tsongkhapa", t:"DalaiLama", type:"Lineage"},
            {s:"Mahavira", t:"GautamaGanadhara", type:"Guru"}, {s:"Mahavira", t:"Bhadrabahu", type:"Lineage"},
            {s:"Bhadrabahu", t:"Kundakunda", type:"Lineage"}, {s:"Mahavira", t:"Hemachandra", type:"Lineage"},
            {s:"Jaimini", t:"Shabara", type:"Lineage"}, {s:"Shabara", t:"Kumarila", type:"Lineage"},
            {s:"Kumarila", t:"Mandana", type:"Guru"}, {s:"Kumarila", t:"Prabhakara", type:"Guru"},
            {s:"Kapila", t:"Asuri", type:"Guru"}, {s:"Asuri", t:"Panchashikha", type:"Guru"},
            {s:"Panchashikha", t:"IshvaraKrishna", type:"Lineage"},
            {s:"Ramanuja", t:"Madhva", type:"Reaction"}, {s:"Jayadeva", t:"Chaitanya", type:"Influence"},
            {s:"Chaitanya", t:"Tagore", type:"Influence"}, {s:"Vivekananda", t:"Nivedita", type:"Guru"},
            {s:"Panini", t:"Voltaire", type:"Study"}, {s:"Vyasa", t:"Oppenheimer", type:"Study"},
            {s:"Yajnavalkya", t:"Schopenhauer", type:"Study"}, {s:"Vivekananda", t:"Tesla", type:"Meeting"},
            {s:"Kalidasa", t:"Goethe", type:"Inspiration"}, {s:"Jones", t:"MaxMuller", type:"Influence"}
        ];

        // --- NETWORK SETUP ---
        let nodes = new vis.DataSet([]);
        let edges = new vis.DataSet([]);
        let allNodes = [];
        let allEdges = [];

        const container = document.getElementById('network');
        const data = { nodes: nodes, edges: edges };

        const options = {
            nodes: {
                shape: 'dot',
                size: 20,
                borderWidth: 2,
                shadow: {
                    enabled: true,
                    color: 'rgba(0,0,0,0.5)',
                    size: 10,
                    x: 5,
                    y: 5
                },
                font: { 
                    face: 'Cinzel', 
                    color: '#ffffff',
                    size: 16,
                    strokeWidth: 5, 
                    strokeColor: '#050505', 
                    align: 'center',
                    vadjust: -35 
                },
                color: {
                    border: '#333',
                    background: '#222',
                    highlight: { border: '#d4af37', background: '#444' }
                }
            },
            edges: {
                width: 1,
                selectionWidth: 2,
                smooth: {
                    type: "continuous",
                    forceDirection: "none",
                    roundness: 0.4
                },
                arrows: { 
                    to: { scaleFactor: 0.5 } 
                },
                color: { 
                    color: '#444', 
                    highlight: '#d4af37', 
                    opacity: 0.4 
                },
                font: { 
                    face: 'Noto Serif', 
                    size: 9, 
                    color: '#666',
                    strokeWidth: 3, 
                    strokeColor: '#050505',
                    align: 'middle'
                }
            },
            physics: {
                enabled: true,
                stabilization: {
                    enabled: true,
                    iterations: 1500, 
                    updateInterval: 50
                },
                barnesHut: {
                    gravitationalConstant: -10000, 
                    centralGravity: 0.2,
                    springLength: 250, 
                    springConstant: 0.02,
                    damping: 0.09,
                    avoidOverlap: 1
                }
            },
            interaction: { 
                hover: true, 
                tooltipDelay: 200, 
                hideEdgesOnDrag: true,
                zoomView: true
            }
        };

        const network = new vis.Network(container, data, options);

        network.on("stabilizationIterationsDone", function () {
            network.setOptions({ physics: false });
        });

        // COLOR MAPPING
        function getColor(school) {
            if (!school) return "#666";
            if (school.includes('Advaita')) return "#ff9800";
            if (school.includes('Dvaita') || school.includes('Vishishtadvaita')) return "#ff5722";
            if (school.includes('Nyaya') || school.includes('Vaisheshika')) return "#00bcd4";
            if (school.includes('Shaivism')) return "#9c27b0";
            if (school.includes('Bhakti')) return "#ffeb3b";
            if (school.includes('Buddhism')) return "#e91e63";
            if (school.includes('Jainism')) return "#4caf50";
            if (school.includes('Indology')) return "#a5a5a5";
            if (school.includes('Charvaka') || school.includes('Ajivika')) return "#607d8b";
            return "#ddd";
        }

        // INITIAL DATA PROCESSING
        if (typeof rawData !== 'undefined') {
            const seenIds = new Set();
            const uniqueData = [];
            rawData.forEach(item => {
                if (!seenIds.has(item.id)) {
                    seenIds.add(item.id);
                    uniqueData.push(item);
                } else {
                    console.warn("Duplicate ID removed:", item.id);
                }
            });

            uniqueData.forEach(p => {
                let schoolColor = p.school ? getColor(p.school) : "#ddd";
                
                // DEITY SPECIFIC VISUALS
                let finalColor = { background: schoolColor, border: '#333' };
                let finalShape = 'dot';
                let finalSize = 20;
                let finalShadow = { enabled: true, color: 'rgba(0,0,0,0.5)', size: 10 };

                if (p.isDeity) {
                    finalShape = 'star';
                    finalColor = { 
                        background: '#e0f7fa',  /* Divine Blue-White */
                        border: '#00ffff'       /* Cyan Border */
                    };
                    finalShadow = { 
                        enabled: true, 
                        color: '#00ffff',       /* Cyan Glow */
                        size: 20, 
                        x: 0, y: 0 
                    };
                    finalSize = 30;
                }

                allNodes.push({
                    id: p.id,
                    label: p.isDeity ? "★ " + p.label : p.label,
                    group: p.school || "Unknown",
                    value: finalSize,
                    color: finalColor,
                    shape: finalShape,
                    shadow: finalShadow,
                    font: { size: p.isDeity ? 22 : 16 },
                    data: p
                });
            });

            lineages.forEach(l => {
                let s = uniqueData.find(x => x.id === l.s);
                let t = uniqueData.find(x => x.id === l.t);
                
                if (!s && seenIds.has(l.s)) s = {id: l.s}; 
                if (!t && seenIds.has(l.t)) t = {id: l.t};

                if (s && t) {
                    let color = (l.type === "Lineage (Guru)" || l.type === "Guru") ? "#d4af37" : "#555";
                    let dashes = (l.type !== "Lineage (Guru)" && l.type !== "Guru");
                    
                    let labelText = ""; 

                    allEdges.push({
                        from: l.s,
                        to: l.t,
                        arrows: "to",
                        color: { color: color, opacity: 0.6 },
                        dashes: dashes,
                        label: labelText
                    });
                }
            });

            updateGraph();
        }

        // UPDATE GRAPH
        function updateGraph() {
            const sFilter = document.getElementById('schoolFilter').value;
            const rFilter = document.getElementById('regionFilter').value;

            let targetIds = new Set();

            allNodes.forEach(n => {
                let p = n.data;
                let matchesSchool = true;
                let matchesRegion = true;

                if (sFilter !== 'all') {
                    if (sFilter === 'Buddhism') {
                        const buddhistSchools = ['Buddhism', 'Theravada', 'Mahayana', 'Vajrayana', 'Zen'];
                        if (!p.school || !buddhistSchools.includes(p.school)) matchesSchool = false;
                    } else {
                        if (!p.school || p.school !== sFilter) matchesSchool = false;
                    }
                }

                if (rFilter !== 'all') {
                    if ((!p.region || p.region !== rFilter) && (!p.subregion || p.subregion !== rFilter)) matchesRegion = false;
                }

                if (matchesSchool && matchesRegion) {
                    targetIds.add(n.id);
                }
            });

            let visibleIds = new Set();

            if (sFilter === 'all' && rFilter === 'all') {
                allNodes.forEach(n => visibleIds.add(n.id));
            } else {
                targetIds.forEach(id => visibleIds.add(id));
                let changed = true;
                while (changed) {
                    changed = false;
                    allEdges.forEach(e => {
                        if (visibleIds.has(e.to) && !visibleIds.has(e.from)) {
                            visibleIds.add(e.from);
                            changed = true;
                        }
                    });
                }
            }

            const filteredNodes = allNodes.filter(n => visibleIds.has(n.id));
            nodes.clear();
            edges.clear();
            nodes.add(filteredNodes);
            const filteredEdges = allEdges.filter(e => visibleIds.has(e.from) && visibleIds.has(e.to));
            edges.add(filteredEdges);
        }

        // TIMELINE
        const timelineData = new vis.DataSet(rawData.filter(x => !x.isDeity).map((t, i) => ({
            id: i,
            content: t.label,
            start: new Date(0).setFullYear(t.year),
            type: 'point', // VITAL CHANGE: Dots instead of ranges
            className: 'vis-point', 
            personId: t.id,
            // Inline style injection to get dynamic school colors on dots
            style: `border-color: ${getColor(t.school)}` 
        })));

        const timeline = new vis.Timeline(document.getElementById('mytimeline'), timelineData, {
            height: '100%',
            stack: true, // Auto-stack to avoid overlap
            margin: { item: 15, axis: 10 },
            orientation: 'bottom',
            start: new Date(0).setFullYear(1000),
            end: new Date(0).setFullYear(2000),
            zoomMin: 1000 * 60 * 60 * 24 * 365 * 10
        });

        // Add custom class to timeline items on render for CSS targeting
        timeline.on('itemover', function (props) {
             // Optional hover effects
        });

        timeline.on('select', (props) => {
            if (props.items.length) {
                const item = timelineData.get(props.items[0]);
                const node = allNodes.find(n => n.id === item.personId);
                if (node) openPanel(node.data);
            }
        });

    function openPanel(d) {
        document.getElementById('p-name').innerText = d.iast || d.label;
        document.getElementById('p-dates').innerText = d.isDeity ? "Divine / Timeless" : 
            (d.year < 0 ? Math.abs(d.year) + " BCE" : d.year + " CE");
        document.getElementById('p-school').innerText = d.school || "";
        document.getElementById('p-region').innerText = (d.region || "") + (d.subregion ? ` (${d.subregion})` : "");

        const workEl = document.getElementById('p-work');
        if (d.work && d.workUrl) {
            workEl.innerHTML = `<a href="${d.workUrl}" target="_blank" class="opus-link">${d.work} ↗</a>`;
        } else {
            workEl.innerText = d.work || "N/A";
        }

        document.getElementById('p-note').innerText = d.note || "";
        
        let parent = lineages.find(l => l.t === d.id); 
        let lineageText = "Source / Independent";
        if (parent) {
            if (parent.type === "Lineage (Guru)") lineageText = `Disciple of ${parent.s}`;
            else if (parent.type === "Lineage") lineageText = `In Lineage of ${parent.s}`;
            else if (parent.type === "Influence") lineageText = `Influenced by ${parent.s}`;
            else lineageText = `${parent.type} of ${parent.s}`; 
        }
        document.getElementById('p-lineage').innerText = lineageText;

        const ul = document.getElementById('p-others');
        ul.innerHTML = "";
        if (d.others && d.others.length > 0) d.others.forEach(w => ul.innerHTML += `<li>${w}</li>`);
        else ul.innerHTML = "<li>No other major records listed.</li>";

        document.getElementById('side-panel').style.width = "400px";
        document.getElementById('panel-content').style.opacity = "1";
    }

    network.on("click", function(params) {
        if (params.nodes.length > 0) {
            const nodeId = params.nodes[0];
            const node = nodes.get(nodeId);
            if (node) {
                openPanel(node.data);
                if (!node.data.isDeity) {
                    const tItem = timelineData.get({ filter: i => i.personId === node.id });
                    if (tItem.length) timeline.moveTo(tItem[0].start);
                }
            }
        } else {
            document.getElementById('side-panel').style.width = "0";
            document.getElementById('panel-content').style.opacity = "0";
        }
    });

    function searchNode(e) {
        if (e.key === 'Enter') {
            const q = document.getElementById('search').value.toLowerCase();
            const found = allNodes.find(n => n.label.toLowerCase().includes(q));
            if (found) {
                document.getElementById('schoolFilter').value = 'all';
                document.getElementById('regionFilter').value = 'all';
                updateGraph();
                setTimeout(() => {
                    network.selectNodes([found.id]);
                    network.focus(found.id, { scale: 1.5, animation: true });
                    openPanel(found.data);
                }, 100);
            }
        }
    }

    const gutter = document.getElementById('drag-gutter');
    const timelineDiv = document.getElementById('mytimeline');
    let isDragging = false;
    let startY, startHeight;

    gutter.addEventListener('mousedown', (e) => {
        isDragging = true;
        startY = e.clientY;
        startHeight = timelineDiv.offsetHeight;
        document.body.style.cursor = 'ns-resize'; 
        document.body.style.userSelect = 'none'; 
    });

    window.addEventListener('mousemove', (e) => {
        if (!isDragging) return;
        const deltaY = startY - e.clientY;
        const newHeight = startHeight + deltaY;
        if (newHeight > 50 && newHeight < window.innerHeight * 0.8) {
            timelineDiv.style.height = newHeight + 'px';
        }
    });

    window.addEventListener('mouseup', () => {
        if (isDragging) {
            isDragging = false;
            document.body.style.cursor = '';
            document.body.style.userSelect = '';
            network.redraw();
            timeline.redraw();
        }
    });
    </script>
</body>
</html>
